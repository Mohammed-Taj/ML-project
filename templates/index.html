<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diamond Price Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #3a86ff;
            --secondary: #ff006e;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #4cc9f0;
            --gradient: linear-gradient(135deg, #3a86ff, #8338ec);
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--dark);
            padding-top: 20px;
            padding-bottom: 50px;
        }
        
        .navbar-brand {
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background: var(--gradient);
            color: white;
            font-weight: 600;
            border-bottom: none;
            padding: 20px;
        }
        
        .form-control, .form-select {
            border-radius: 10px;
            padding: 12px 15px;
            border: 2px solid #e6e6e6;
            transition: all 0.3s;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(58, 134, 255, 0.25);
        }
        
        .btn-primary {
            background: var(--gradient);
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(58, 134, 255, 0.4);
        }
        
        .prediction-result {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            padding: 10px 0;
        }
        
        .diamond-visualization {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(45deg) rotateZ(45deg);
            transition: all 1s ease;
        }
        
        .diamond-face {
            position: absolute;
            width: 140px;
            height: 140px;
            background: linear-gradient(45deg, rgba(184, 233, 255, 0.8), rgba(255, 255, 255, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 20px rgba(58, 134, 255, 0.3);
        }
        
        .diamond-face:nth-child(1) { transform: translateZ(70px); }
        .diamond-face:nth-child(2) { transform: rotateY(90deg) translateZ(70px); }
        .diamond-face:nth-child(3) { transform: rotateY(180deg) translateZ(70px); }
        .diamond-face:nth-child(4) { transform: rotateY(-90deg) translateZ(70px); }
        .diamond-face:nth-child(5) { transform: rotateX(90deg) translateZ(70px); }
        .diamond-face:nth-child(6) { transform: rotateX(-90deg) translateZ(70px); }
        
        .feature-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 15px;
        }
        
        .info-card {
            border-left: 4px solid;
            border-image: var(--gradient);
            border-image-slice: 1;
        }
        
        .slider-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .feature-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #dde1e7;
            outline: none;
        }
        
        .feature-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(58, 134, 255, 0.5);
        }
        
        .tooltip-icon {
            cursor: pointer;
            color: var(--primary);
        }
        
        .price-history-chart {
            max-height: 300px;
            margin-top: 20px;
        }
        
        .loading-spinner {
            display: none;
            width: 3rem;
            height: 3rem;
            margin: 0 auto;
        }
        
        .saved-predictions {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .alert-danger {
            border-radius: 10px;
        }
        
        @media (max-width: 768px) {
            .diamond-visualization {
                width: 150px;
                height: 150px;
            }
            
            .diamond-face {
                width: 105px;
                height: 105px;
            }
            
            .diamond-face:nth-child(1) { transform: translateZ(52.5px); }
            .diamond-face:nth-child(2) { transform: rotateY(90deg) translateZ(52.5px); }
            .diamond-face:nth-child(3) { transform: rotateY(180deg) translateZ(52.5px); }
            .diamond-face:nth-child(4) { transform: rotateY(-90deg) translateZ(52.5px); }
            .diamond-face:nth-child(5) { transform: rotateX(90deg) translateZ(52.5px); }
            .diamond-face:nth-child(6) { transform: rotateX(-90deg) translateZ(52.5px); }
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <nav class="navbar navbar-expand-lg navbar-light bg-white rounded-3 shadow-sm mb-4">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class="fas fa-gem me-2"></i>DiamondPrice.ai
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="#"><i class="fas fa-calculator me-1"></i> Predictor</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="historyBtn"><i class="fas fa-history me-1"></i> History</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#"><i class="fas fa-info-circle me-1"></i> Guide</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="row g-4">
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 class="mb-0"><i class="fas fa-sliders-h me-2"></i>Diamond Specifications</h3>
                    </div>
                    <div class="card-body">
                        <form id="predictionForm">
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Carat Weight <span class="slider-value" id="caratValue">0.23</span></label>
                                    <input type="range" class="form-range feature-slider" id="carat" name="carat" min="0.2" max="5.0" step="0.01" value="0.23">
                                    <div class="form-text">Larger diamonds are rarer and more valuable</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Color Grade</label>
                                    <select class="form-select" id="color" name="color">
                                        <option value="D">D (Colorless)</option>
                                        <option value="E">E (Colorless)</option>
                                        <option value="F" selected>F (Colorless)</option>
                                        <option value="G">G (Near Colorless)</option>
                                        <option value="H">H (Near Colorless)</option>
                                        <option value="I">I (Near Colorless)</option>
                                        <option value="J">J (Near Colorless)</option>
                                    </select>
                                    <div class="form-text">D is the best, J is the worst</div>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Clarity Grade</label>
                                    <select class="form-select" id="clarity" name="clarity">
                                        <option value="IF">IF (Internally Flawless)</option>
                                        <option value="VVS1">VVS1 (Very Very Slightly Included)</option>
                                        <option value="VVS2">VVS2 (Very Very Slightly Included)</option>
                                        <option value="VS1">VS1 (Very Slightly Included)</option>
                                        <option value="VS2" selected>VS2 (Very Slightly Included)</option>
                                        <option value="SI1">SI1 (Slightly Included)</option>
                                        <option value="SI2">SI2 (Slightly Included)</option>
                                        <option value="I1">I1 (Included)</option>
                                    </select>
                                    <div class="form-text">IF is the best, I1 is the worst</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Length (x) <span class="slider-value" id="xValue">3.95</span> mm</label>
                                    <input type="range" class="form-range feature-slider" id="x" name="x" min="3.0" max="10.0" step="0.01" value="3.95">
                                    <div class="form-text">The length of the diamond in millimeters</div>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Width (y) <span class="slider-value" id="yValue">3.98</span> mm</label>
                                    <input type="range" class="form-range feature-slider" id="y" name="y" min="3.0" max="10.0" step="0.01" value="3.98">
                                    <div class="form-text">The width of the diamond in millimeters</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Depth (z) <span class="slider-value" id="zValue">2.43</span> mm</label>
                                    <input type="range" class="form-range feature-slider" id="z" name="z" min="1.0" max="7.0" step="0.01" value="2.43">
                                    <div class="form-text">The depth of the diamond in millimeters</div>
                                </div>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-calculator me-2"></i>Calculate Price
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="mb-0"><i class="fas fa-chart-line me-2"></i>Price Prediction</h3>
                    </div>
                    <div class="card-body text-center py-5">
                        <div class="prediction-result" id="predictionText">
                            Enter diamond details and click Calculate
                        </div>
                        <div class="loading-spinner spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <div class="alert alert-danger mt-3" id="errorAlert" style="display: none;"></div>
                        <p class="text-muted mt-2">Based on current market trends and our ML algorithm</p>
                        
                        <div class="progress mt-4 mb-3" style="height: 20px;">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 30%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">Value Factor: 30%</div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="feature-icon">
                                        <i class="fas fa-weight-hanging"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Carat Impact</h6>
                                        <small class="text-muted" id="caratImpact">+$0</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="feature-icon">
                                        <i class="fas fa-palette"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Color Impact</h6>
                                        <small class="text-muted" id="colorImpact">+$0</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="feature-icon">
                                        <i class="fas fa-diamond"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-0">Clarity Impact</h6>
                                        <small class="text-muted" id="clarityImpact">+$0</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <canvas id="priceHistoryChart" class="price-history-chart"></canvas>
                        </div>
                        
                        <div class="mt-4 d-flex justify-content-center">
                            <button class="btn btn-outline-primary me-2" id="savePredictionBtn">
                                <i class="fas fa-save me-1"></i> Save Prediction
                            </button>
                            <button class="btn btn-outline-secondary" id="resetFormBtn">
                                <i class="fas fa-redo me-1"></i> Reset Form
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 class="mb-0"><i class="fas fa-gem me-2"></i>Diamond Visualization</h3>
                    </div>
                    <div class="card-body text-center">
                        <div class="diamond-visualization">
                            <div class="diamond-face"></div>
                            <div class="diamond-face"></div>
                            <div class="diamond-face"></div>
                            <div class="diamond-face"></div>
                            <div class="diamond-face"></div>
                            <div class="diamond-face"></div>
                        </div>
                        <div class="mt-4">
                            <h5>Estimated Specifications</h5>
                            <div class="row mt-3">
                                <div class="col-6">
                                    <div class="p-3 bg-light rounded-3">
                                        <h6 class="mb-0">Depth %</h6>
                                        <p class="mb-0 fw-bold" id="depthPercent">62.3%</p>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="p-3 bg-light rounded-3">
                                        <h6 class="mb-0">Table %</h6>
                                        <p class="mb-0 fw-bold" id="tablePercent">57.0%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 class="mb-0"><i class="fas fa-history me-2"></i>Prediction History</h3>
                    </div>
                    <div class="card-body">
                        <div class="saved-predictions" id="savedPredictions">
                            <p class="text-center text-muted">No saved predictions yet</p>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 class="mb-0"><i class="fas fa-info-circle me-2"></i>Diamond Guide</h3>
                    </div>
                    <div class="card-body info-card">
                        <h5>Color Quality Scale</h5>
                        <div class="color-scale mb-3">
                            <div class="d-flex justify-content-between small mb-1">
                                <span>Best</span>
                                <span>Worst</span>
                            </div>
                            <div class="progress mb-3" style="height: 15px;">
                                <div class="progress-bar" style="width: 100%; background: linear-gradient(90deg, #cce6ff, #b3d9ff, #99ccff, #80bfff, #66b2ff, #4da5ff, #3399ff);"></div>
                            </div>
                            <div class="d-flex justify-content-between small">
                                <span>D</span>
                                <span>E</span>
                                <span>F</span>
                                <span>G</span>
                                <span>H</span>
                                <span>I</span>
                                <span>J</span>
                            </div>
                        </div>
                        
                        <h5 class="mt-4">Clarity Quality Scale</h5>
                        <div class="clarity-scale">
                            <div class="d-flex justify-content-between small mb-1">
                                <span>Best</span>
                                <span>Worst</span>
                            </div>
                            <div class="progress mb-3" style="height: 15px;">
                                <div class="progress-bar" style="width: 100%; background: linear-gradient(90deg, #4cc9f0, #43b8db, #3aa7c6, #3196b1, #28869c, #1f7587, #166472);"></div>
                            </div>
                            <div class="d-flex justify-content-between small">
                                <span>IF</span>
                                <span>VVS1</span>
                                <span>VVS2</span>
                                <span>VS1</span>
                                <span>VS2</span>
                                <span>SI1</span>
                                <span>SI2</span>
                                <span>I1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let priceHistoryChart = null;
        let savedPredictions = JSON.parse(localStorage.getItem('diamondPredictions')) || [];
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the app
            initSliders();
            updateDiamondVisualization();
            loadSavedPredictions();
            initPriceHistoryChart();
            
            // Form submission
            document.getElementById('predictionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                calculatePrice();
            });
            
            // Reset form button
            document.getElementById('resetFormBtn').addEventListener('click', function() {
                document.getElementById('predictionForm').reset();
                document.getElementById('carat').value = 0.23;
                document.getElementById('x').value = 3.95;
                document.getElementById('y').value = 3.98;
                document.getElementById('z').value = 2.43;
                updateSliderValues();
                updateDiamondVisualization();
                document.getElementById('predictionText').textContent = 'Enter diamond details and click Calculate';
                document.getElementById('errorAlert').style.display = 'none';
            });
            
            // Save prediction button
            document.getElementById('savePredictionBtn').addEventListener('click', savePrediction);
            
            // History button
            document.getElementById('historyBtn').addEventListener('click', function() {
                const historySection = document.getElementById('savedPredictions');
                historySection.scrollIntoView({ behavior: 'smooth' });
            });
        });
        
        function initSliders() {
            // Update slider values on input
            const sliders = document.querySelectorAll('.feature-slider');
            sliders.forEach(slider => {
                const valueDisplay = document.getElementById(slider.id + 'Value');
                valueDisplay.textContent = slider.value;
                
                slider.addEventListener('input', function() {
                    valueDisplay.textContent = this.value;
                    updateDiamondVisualization();
                });
            });
            
            // Update dropdowns
            const dropdowns = document.querySelectorAll('select');
            dropdowns.forEach(dropdown => {
                dropdown.addEventListener('change', updateDiamondVisualization);
            });
        }
        
        function updateSliderValues() {
            // Update all slider value displays
            const sliders = document.querySelectorAll('.feature-slider');
            sliders.forEach(slider => {
                const valueDisplay = document.getElementById(slider.id + 'Value');
                valueDisplay.textContent = slider.value;
            });
        }
        
        function updateDiamondVisualization() {
            // In a real app, this would update the 3D diamond visualization
            // based on the input values. For this example, we'll just update some text.
            
            const x = parseFloat(document.getElementById('x').value);
            const y = parseFloat(document.getElementById('y').value);
            const z = parseFloat(document.getElementById('z').value);
            
            // Calculate depth percentage (simplified)
            const depthPercent = ((z / ((x + y) / 2)) * 100).toFixed(1);
            document.getElementById('depthPercent').textContent = depthPercent + '%';
            
            // Calculate table percentage (simplified)
            const tablePercent = (58 - (x - 3.9) * 2).toFixed(1);
            document.getElementById('tablePercent').textContent = tablePercent + '%';
        }
        
        async function calculatePrice() {
            // Show loading spinner, hide error
            document.querySelector('.loading-spinner').style.display = 'block';
            document.getElementById('predictionText').textContent = 'Calculating...';
            document.getElementById('errorAlert').style.display = 'none';
            
            // Get form values
            const formData = {
                carat: parseFloat(document.getElementById('carat').value),
                color: document.getElementById('color').value,
                clarity: document.getElementById('clarity').value,
                x: parseFloat(document.getElementById('x').value),
                y: parseFloat(document.getElementById('y').value),
                z: parseFloat(document.getElementById('z').value)
            };
            
            try {
                // Send request to Flask backend
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Unknown error occurred');
                }
                
                // Update the UI with the result
                document.getElementById('predictionText').textContent = `Predicted Price: $${data.predicted_price.toLocaleString()}`;
                
                // Update impact values
                updateImpactValues(formData, data.predicted_price);
                
                // Update the chart
                updatePriceHistoryChart(formData, data.predicted_price);
                
            } catch (error) {
                console.error('Error:', error);
                const errorAlert = document.getElementById('errorAlert');
                errorAlert.textContent = `Error: ${error.message}`;
                errorAlert.style.display = 'block';
                document.getElementById('predictionText').textContent = 'Error calculating price';
            } finally {
                // Hide loading spinner
                document.querySelector('.loading-spinner').style.display = 'none';
            }
        }
        
        function updateImpactValues(formData, price) {
            // Calculate individual impacts (simplified for demonstration)
            const carat = formData.carat;
            const color = formData.color;
            const clarity = formData.clarity;
            
            const basePrice = 2500;
            const caratMultiplier = Math.pow(carat, 2) * 1.8;
            const colorMultipliers = {D: 3.0, E: 2.5, F: 2.2, G: 1.8, H: 1.5, I: 1.2, J: 1.0};
            const clarityMultipliers = {IF: 2.5, VVS1: 2.2, VVS2: 2.0, VS1: 1.8, VS2: 1.6, SI1: 1.4, SI2: 1.2, I1: 1.0};
            
            document.getElementById('caratImpact').textContent = `+$${Math.round(basePrice * (caratMultiplier - 1)).toLocaleString()}`;
            document.getElementById('colorImpact').textContent = `+$${Math.round(basePrice * caratMultiplier * (colorMultipliers[color] - 1)).toLocaleString()}`;
            document.getElementById('clarityImpact').textContent = `+$${Math.round(basePrice * caratMultiplier * colorMultipliers[color] * (clarityMultipliers[clarity] - 1)).toLocaleString()}`;
            
            // Update progress bar
            document.querySelector('.progress-bar').style.width = `${Math.min(100, carat * 20)}%`;
            document.querySelector('.progress-bar').textContent = `Value Factor: ${Math.min(100, Math.round(carat * 20))}%`;
        }
        
        function initPriceHistoryChart() {
            const ctx = document.getElementById('priceHistoryChart').getContext('2d');
            priceHistoryChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Price History',
                        data: [],
                        borderColor: '#3a86ff',
                        tension: 0.1,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Recent Predictions'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
        
        function updatePriceHistoryChart(formData, price) {
            // Add new data point to chart
            if (priceHistoryChart) {
                const now = new Date();
                const timeString = now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0');
                
                priceHistoryChart.data.labels.push(timeString);
                priceHistoryChart.data.datasets[0].data.push(price);
                
                // Keep only the last 5 data points
                if (priceHistoryChart.data.labels.length > 5) {
                    priceHistoryChart.data.labels.shift();
                    priceHistoryChart.data.datasets[0].data.shift();
                }
                
                priceHistoryChart.update();
            }
        }
        
        function savePrediction() {
            const predictionText = document.getElementById('predictionText').textContent;
            
            if (predictionText.includes('$')) {
                const formData = {
                    carat: parseFloat(document.getElementById('carat').value),
                    color: document.getElementById('color').value,
                    clarity: document.getElementById('clarity').value,
                    x: parseFloat(document.getElementById('x').value),
                    y: parseFloat(document.getElementById('y').value),
                    z: parseFloat(document.getElementById('z').value),
                    price: predictionText.replace('Predicted Price: $', '').replace(/,/g, '')
                };
                
                // Add timestamp
                formData.timestamp = new Date().toISOString();
                
                // Add to saved predictions
                savedPredictions.push(formData);
                
                // Save to localStorage
                localStorage.setItem('diamondPredictions', JSON.stringify(savedPredictions));
                
                // Update UI
                loadSavedPredictions();
                
                // Show confirmation
                alert('Prediction saved successfully!');
            } else {
                alert('Please calculate a price first before saving.');
            }
        }
        
        function loadSavedPredictions() {
            const container = document.getElementById('savedPredictions');
            
            if (savedPredictions.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">No saved predictions yet</p>';
                return;
            }
            
            container.innerHTML = '';
            
            // Show last 5 saved predictions
            const recentPredictions = savedPredictions.slice(-5).reverse();
            
            recentPredictions.forEach(prediction => {
                const date = new Date(prediction.timestamp);
                const dateString = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                
                const predictionEl = document.createElement('div');
                predictionEl.className = 'card mb-2';
                predictionEl.innerHTML = `
                    <div class="card-body py-2">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="mb-0">${prediction.carat} carat, ${prediction.color}, ${prediction.clarity}</h6>
                                <small class="text-muted">${dateString}</small>
                            </div>
                            <div class="text-primary fw-bold">$${parseFloat(prediction.price).toLocaleString()}</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(predictionEl);
            });
        }
    </script>
</body>
</html>